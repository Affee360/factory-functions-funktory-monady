import {
  CodeSurfer,
  CodeSurferColumns,
  Step,
} from "code-surfer";
import {
  github,
  vsDark,
  nightOwl,
} from "@code-surfer/themes";
import { Image } from "mdx-deck";

export const theme = nightOwl;

# CzeÅ›Ä‡ ðŸ‘‹

<p style="text-align: center">
  Programowanie funkcyjne w JavaScript, czyli czym sÄ…
  Factory Functions, funktory i monady.
</p>

---

<CodeSurferColumns theme={theme}>

<Step>

```js showNumbers
class PieceOfCake {
  bake() {}
  decorate() {}
  cut() {}
}
```

</Step>

<Step>

```js showNumbers
class PieceOfCake {
  bake() {}
  decorate() {}
  cut() {}
}

class Muffin {
  bake() {}
  decorate() {}
}
```

</Step>

<Step>

```js title="PrzydaÅ‚o by siÄ™ uzyÄ‡ DRY" showNumbers 1:11
class PieceOfCake {
  bake() {}
  decorate() {}
  cut() {}
}

class Muffin {
  bake() {}
  decorate() {}
  heatUp() {}
}
```

</Step>

<Step>

```js showNumbers 1:4
class Baking {
  bake() {}
  decorate() {}
}
```

</Step>

<Step>

```js title="inheritance" showNumbers
class Baking {
  bake() {}
  decorate() {}
}

class PieceOfCake extends Baking {
  cut() {}
}

class Muffin extends Baking {
  heatUp() {}
}
```

</Step>

<Step>

```js showNumbers
class Baking {
  bake() {}
  decorate() {}
}

class PieceOfCake extends Baking {
  cut() {}
}

class Muffin extends Baking {
  heatUp() {}
}

class Salad {
  mixed() {}
  decorate() {}
}
```

</Step>

<Step>

```js title="The Duplication by Necessity Problem" showNumbers 1:17
class Baking {
  bake() {}
  decorate() {}
}

class PieceOfCake extends Baking {
  cut() {}
}

class Muffin extends Baking {
  heatUp() {}
}

class Salad {
  mixed() {}
  decorate() {}
}
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns theme={theme}>

<Step>

```js title="Composition" showNumbers
const bakeble = (state) => ({
  bake: () => console.log(`baking new ${state.type}`),
});

const decorable = (state) => ({
  decorate: () => console.log(`decorating new ${state.name}`),
});

const cutable = (state) => ({
  cut: () => console.log(`cuting new ${state.name}`),
});
```

</Step>

<Step>

```js title="Factory Function" showNumbers
const bakeble = (state) => ({
  bake: () => console.log(`baking new ${state.type}`),
});

const decorable = (state) => ({
  decorate: () => console.log(`decorating new ${state.name}`),
});

const cutable = (state) => ({
  cut: () => console.log(`cuting new ${state.name}`),
});

const pieceOfCake = (name, type) => {
  const state = { name, type };

  return Object.assign({}, bakeble(state), decorable(state), cutable(state));
};
```

</Step>

<Step>

```js title="Factory Function" showNumbers
const bakeble = (state) => ({
  bake: () => console.log(`baking new ${state.type}`),
});

const decorable = (state) => ({
  decorate: () => console.log(`decorating new ${state.name}`),
});

const cutable = (state) => ({
  cut: () => console.log(`cuting new ${state.name}`),
});

const pieceOfCake = (name, type) => {
  const state = { name, type };

  return Object.assign({}, bakeble(state), decorable(state), cutable(state));
};

const newPiece = pieceOfCake('chocolate cake' 'cake');
newPiece.bake();
newPiece.decorate();
newPiece.cut();
```

</Step>

</CodeSurferColumns>

---

<Image
  src="http://localhost:8081/1.png"
  style="background-image: contain; background-size: 400px auto;"
/>

---

# Funktory

<p style="text-align: center">
  kontener dajacy interface umozliwiajacy wykonanie funkcji
  dla kazdej wartosci wewnatrz niego
</p>

---

<CodeSurferColumns theme={theme}>

<Step>

  ```js title="functor" showNumbers
  const array = [1,2,3,4];
  ```

</Step>

<Step>

  ```js title="functor" showNumbers
  const array = [1,2,3,4];
  const addOne = (value) => value + 1;
  ```

</Step>

<Step>

  ```js title="functor" showNumbers
  const array = [1,2,3,4];
  const addOne = (value) => value + 1;
  const arrayMap= array.map(addOne);
  ```

</Step>

</CodeSurferColumns>

---

# #1 Indentity

---

<CodeSurfer theme={theme}>

```js showNumbers
  const sameArray = array.map((v) => v);
  ```

</CodeSurfer>

---

# #2 Composition

---

<CodeSurferColumns theme={theme}>

<Step>

```js showNumbers
  const double = (value) => value * 2;
  const triple = (value) => value * 3;
  ```

</Step>

<Step>

 ```js showNumbers
  const double = (value) => value * 2;
  const triple = (value) => value * 3;

  const composition = array.map((v) => triple(double(v)));
  ```

</Step>

<Step>

 ```js showNumbers
  const double = (value) => value * 2;
  const triple = (value) => value * 3;

  const composition = array.map((v) => triple(double(v)));
  const chaining = array.map((v) => double(v)).map((v) => triple(v));
  ```

</Step>

</CodeSurferColumns>

---

<Image
  src="http://localhost:8081/2.png"
  style="background-image: contain; background-size: 400px auto;"
/>

---

# Jak stworzyÄ‡ functor

---

<CodeSurferColumns theme={theme}>

<Step>

```js showNumbers
  const double = (value) => value * 2;
  const triple = (value) => value * 3;
  ```

</Step>

<Step>

```js showNumbers
  const double = (value) => value * 2;
  const triple = (value) => value * 3;

  const functor = (v) => ({})
  ```

</Step>

<Step>

```js showNumbers
  const double = (value) => value * 2;
  const triple = (value) => value * 3;

  const functor = (v) => ({
    map: (fn) => functor(fn(v)),
  })
  ```

</Step>

<Step>

```js showNumbers
  const double = (value) => value * 2;
  const triple = (value) => value * 3;

  const functor = (v) => ({
    map: (fn) => functor(fn(v)),
    valueOf: () => v,
  })
  ```

</Step>

<Step>

```js showNumbers
  const double = (value) => value * 2;
  const triple = (value) => value * 3;

  const functor = (v) => ({
    map: (fn) => functor(fn(v)),
    valueOf: () => v,
  })

  const number = functor(2);
  ```

</Step>

</CodeSurferColumns>

---

<Image
  src="http://localhost:8081/3.png"
  style="background-image: contain; background-size: 400px auto;"
/>